{{#each subsectionsWithVerses as subsection}}
<SectionLine
	description="{{subsection.title}}"
	chiasmIdentifier="{{chiasmIdentifier}}"
	sectionIdentifier="{{subsection.identifier}}"
	zoomedIn="{{!!currentSubsection}}"
	showColorBar="{{showColorBar}}"
	anchor="{{subsection.anchor}}"
	siblingAnchor="{{subsection.siblingAnchor}}"
	siblingIsDown="{{subsection.siblingIsDown}}"
	visible="{{subsectionIsVisible(subsection)}}"
	range="{{subsection.range}}"
>
	<Paragraphs
		verses="{{subsection.verses}}"
	/>
</SectionLine>
{{/each}}

<script>
const combineStructureAndVerses = require('lib/combine-structure-and-verses')

const Paragraphs = require('component/paragraphs.html')
const SectionLine = require('component/section-line.html')

export default {
	components: {
		Paragraphs,
		SectionLine
	},
	computed: {
		subsectionIsVisible: currentSubsection => {
			return subsection => !currentSubsection || subsection.identifier === currentSubsection
		},
		subsectionsWithVerses: (subsections, verses) => combineStructureAndVerses(subsections, verses)
	}
}
</script>
